# Job submission configuration file
#
---

batch_connect:
  template: "basic"
  

#
# sgd - 09/20/2018
#
script:
  native:
    - "--time"
    - "<%= bc_num_hours %>:0:0"
    - "-n"
    - "<%= num_cores %>"
    - "--mem"
    - "<%= num_memory %>"
    - "--nodes"
    - "1"
    <%- if gpu_partition == "preempt"-%>
    - "-p" 
    - "preempt"
        <%- if gpu_type == "a100_40" -%>
    - "--gres=gpu:a100:1"
    - "--constraint=a100-40G"
        <%- elsif gpu_type == "a100_80" -%>
    - "--gres=gpu:a100:1"
    - "--constraint=a100-80G"
        <%- else -%>
    - "--gres=gpu:<%= gpu_type %>:1"
        <%- end -%>
    <%- elsif gpu_partition == "gpu" -%>
    - "-p"
    - "gpu"
        <%- if gpu_type == "a100_80" -%>
    - "--gres=gpu:a100:1"
    - "--constraint=a100-80G"
        <%- else -%>
    - "--gres=gpu:<%= gpu_type %>:1"
        <%- end -%>
    <%- elsif gpu_partition == "pettilab" -%>
    - "-p"
    - "pettilab"
    - "--gres=gpu:l40:1"
    <%- else -%>
    - "--reservation"
    - "<%= reservation %>"
    <%- end -%>
