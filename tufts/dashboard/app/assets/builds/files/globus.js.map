{
  "version": 3,
  "sources": ["../../../javascript/files/globus.js"],
  "sourcesContent": ["var globus_endpoints;\n\n$(document).ready(function() {\n    globus_endpoints = $(\"#globus_endpoints\").data(\"globusEndpoints\");\n});\n\n/**\n * Given a directory name, return the associated Globus endpoint and path\n * @params {string} directory Directory name\n * @return {string|undefined} Globus endpoint ID\n */\nfunction getEndpointInfo(directory) {\n  for (const endpoint of globus_endpoints) {\n    if (directory.startsWith(endpoint[\"path\"])) {\n      return endpoint;\n    }\n  }\n}\n\n/**\n * Generate a link to the Globus transfer app\n * @params {string} directory Directory name\n * @return {string|null} Globus transfer app URL with directory and endpoint populated\n */\nexport function getGlobusLink(directory) {\n  let info = getEndpointInfo(directory);\n  if (info) {\n    let origin_path = directory.replace(info.path, info.endpoint_path);\n    origin_path = origin_path.replace(\"//\", \"/\");\n    return \"https://app.globus.org/file-manager?origin_id=\" + info.endpoint + \"&origin_path=\" + origin_path;\n  }\n}\n\n/**\n * Enable or disable the Globus button and update the tooltip based on current directory\n * @params {string} directory Filesystem directory name\n * @params {object} link The link object whose href value will change\n * @params {object} wrapper The wrapper containing the link whose tooltip title will change\n * @return undefined\n */\nexport function updateGlobusLink(directory, link, wrapper) {\n  let info = getEndpointInfo(directory);\n  if (info) {\n    link.removeClass(\"disabled\");\n    wrapper.prop(\"title\", \"Open the current directory with Globus\");\n  } \n  else {\n    link.addClass(\"disabled\");\n    wrapper.prop(\"title\", \"No Globus endpoint associated with this directory\");\n  }\n}\n"],
  "mappings": "AAAA,IAAIA,EAEJ,EAAE,QAAQ,EAAE,MAAM,UAAW,CACzBA,EAAmB,EAAE,mBAAmB,EAAE,KAAK,iBAAiB,CACpE,CAAC,EAOD,SAASC,EAAgBC,EAAW,CAClC,QAAWC,KAAYH,EACrB,GAAIE,EAAU,WAAWC,EAAS,IAAO,EACvC,OAAOA,CAGb,CAOO,SAASC,EAAcF,EAAW,CACvC,IAAIG,EAAOJ,EAAgBC,CAAS,EACpC,GAAIG,EAAM,CACR,IAAIC,EAAcJ,EAAU,QAAQG,EAAK,KAAMA,EAAK,aAAa,EACjE,OAAAC,EAAcA,EAAY,QAAQ,KAAM,GAAG,EACpC,iDAAmDD,EAAK,SAAW,gBAAkBC,CAC9F,CACF,CASO,SAASC,EAAiBL,EAAWM,EAAMC,EAAS,CAC9CR,EAAgBC,CAAS,GAElCM,EAAK,YAAY,UAAU,EAC3BC,EAAQ,KAAK,QAAS,wCAAwC,IAG9DD,EAAK,SAAS,UAAU,EACxBC,EAAQ,KAAK,QAAS,mDAAmD,EAE7E",
  "names": ["globus_endpoints", "getEndpointInfo", "directory", "endpoint", "getGlobusLink", "info", "origin_path", "updateGlobusLink", "link", "wrapper"]
}
