jQuery(function(){let l=0;function i(){return`attachment_id_${++l}`}function r(t){if(t<1024)return t+"bytes";if(t>=1024&&t<1048576)return(t/1024).toFixed(1)+"KB";if(t>=1048576)return(t/1048576).toFixed(1)+"MB"}function d(t){if(!$("#new_support_ticket")[0].reportValidity()){t.preventDefault();return}$("body").addClass("modal-open"),$("#full-page-spinner").removeClass("d-none")}function c(){let t=$("#attachments_error");t.parent().removeClass("has-error"),t.remove()}function s(t){let e=$("[data-bs-toggle='attachments-error']");e.parent().addClass("has-error"),e.after(`<div class="help-block" id="attachments_error">${t}</div>`)}function m(t){c();let e=t.currentTarget.getAttribute("data-attachment-container");$(`#${e}`).remove()}function f(t){c();let e=$(t.currentTarget),n=e.prop("files");if(!n||n.length===0)return;let a=n[0];if(a.size>SUPPORT_TICKET_RESTRICTIONS.max_size){o(T=>{e.parent().replaceWith(T)});let u=SUPPORT_TICKET_MESSAGES["size.attachments"].replace("%{max}",r(SUPPORT_TICKET_RESTRICTIONS.max_size)).replace("%{size}",r(a.size));s(u);return}let p=t.currentTarget.id;$(`label[for='${p}']`).text(`Selected file: ${a.name} (${r(a.size)}).`)}function o(t){let e=i(),n=i(),a=`<div class="attachment-input" id="${e}">
           <div class="form-control attachment-input-content">
              <label class="attachment-file-label" for="${n}">No file selected</label>
              <span class="attachment-delete" data-bs-toggle="attachment-delete" data-attachment-container="${e}" title="Delete attachment"><i class="fas fa-trash-alt"></i></span>
           </div>
           <input class="form-control"  type="file" name="support_ticket[attachments][]" id="${n}">
        </div>`;return t(a),$("input[type='file']").on("change",f),$("[data-bs-toggle='attachment-delete']").on("click",m),a}function h(){if(c(),$("input[type='file']").length>=SUPPORT_TICKET_RESTRICTIONS.max_items){s(SUPPORT_TICKET_MESSAGES["items.attachments"]);return}o(t=>{$("#attachments-container").append(t)})}$(function(){$("[data-bs-toggle='attachments-add']").on("click",h),$("#new_support_ticket").submit(d)})});
//# sourceMappingURL=support_ticket.js.map
