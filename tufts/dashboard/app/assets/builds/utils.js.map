{
  "version": 3,
  "sources": ["../../javascript/config.js", "../../javascript/utils.js"],
  "sourcesContent": ["'use strict;'\n\nconst CONFIG_ID = 'ood_config'\n\nexport function configData() {\n  return document.getElementById(CONFIG_ID).dataset;\n}\n\nexport function maxFileSize () {\n  const cfgData = configData();\n\n  // Check if cfgData['maxFileSize'] is just empty string, \n  // if so set default of maxFileUpload=10737420000 bytes.\n  if (cfgData['maxFileSize'].length == 0) {\n    return parseInt(10737420000, 10);\n  }\n  else {\n    const maxFileSize = cfgData['maxFileSize'];\n    return parseInt(maxFileSize, 10);\n  }\n}\n\nexport function transfersPath() {\n  const cfgData = configData();\n  const transfersPath = cfgData['transfersPath'];\n\n  return transfersPath;\n}\n\nexport function rootPath(){\n  const cfgData = configData();\n  const rootPath = cfgData['rootPath'];\n  if(rootPath == '/') {\n    return rootPath;\n  } else {\n    // remove the trailing / from /pun/sys/dashboard/\n    return rootPath.substring(0, rootPath.length-1)\n  }\n}\n\nexport function csrfToken() {\n  const csrf_token = document.querySelector('meta[name=\"csrf-token\"]').content;\n\n  return csrf_token;\n}\n\nexport function uppyLocale() {\n  const cfgData = configData();\n  return JSON.parse(cfgData['uppyLocale']);\n}\n\nexport function isBCDynamicJSEnabled() {\n  const cfgData = configData();\n  return cfgData['bcDynamicJs'] == 'true'\n}\n\n/*\n  Will return null if xdmod integration is not enabled.\n*/\nexport function xdmodUrl(){\n  const cfgData = configData();\n  const url = cfgData['xdmodUrl'];\n  return url == \"\" ? null : url;\n}\n\nexport function analyticsPath(type){\n  const cfgData = configData();\n  const basePath = cfgData['baseAnalyticsPath']\n  return `${basePath}/${type}`;\n}\n\nexport function bcPollDelay() {\n  const cfgData = configData();\n  return Number(cfgData['bcPollDelay']);\n}\n\nexport function bcIndexUrl() {\n  const cfgData = configData();\n  return cfgData['bcIndexUrl'];\n}\n\nexport function statusPollDelay() {\n  const cfgData = configData();\n  return Number(cfgData['statusPollDelay']);\n}\n\nexport function statusIndexUrl() {\n  const cfgData = configData();\n  return cfgData['statusIndexUrl'];\n}\n\nexport function appsDatatablePageLength() {\n  const cfgData = configData();\n  return parseInt(cfgData['appsDatatablePageLength']);\n}", "import {analyticsPath} from \"./config\";\n\nexport function cssBadgeForState(state){\n  switch (state) {\n    case 'completed':\n      return 'bg-success';\n    case 'running':\n      return 'bg-primary'\n    case 'queued':\n      return 'bg-info';\n    case 'queued_held':\n      return 'bg-warning';\n    case 'suspended':\n      return 'bg-warning';\n    default:\n      return 'bg-warning';\n  }\n}\n\nexport function capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function startOfYear() {\n  const now = new Date();\n  const past = new Date();\n  past.setDate(1);\n  past.setMonth(0);\n  past.setFullYear(now.getFullYear());\n  return `${past.getFullYear()}-${past.getMonth()+1}-${past.getDate()}`;\n}\n\nexport function thirtyDaysAgo() {\n  const now = new Date();\n  const past = new Date();\n  past.setDate(now.getDate() - 30);\n  return `${past.getFullYear()}-${past.getMonth()+1}-${past.getDate()}`;\n}\n\nexport function today() {\n  const now = new Date();\n  return `${now.getFullYear()}-${now.getMonth()+1}-${now.getDate()}`;\n}\n\nfunction showSpinner() {\n  $('body').addClass('modal-open');\n  $('#full-page-spinner').removeClass('d-none');\n}\n\nexport function bindFullPageSpinnerEvent() {\n  $('.full-page-spinner').each((index, element) => {\n    const $element = $(element);\n    if($element.is('a')) {\n      $element.on('click', showSpinner);\n    } else {\n      $element.closest('form').on('submit', showSpinner);\n    }\n  });\n}\n\n// open links in javascript and display an alert\nexport function openLinkInJs(event) {\n  event.preventDefault();\n  let href = event.target.href;\n\n  // event.target could be a child of the anchor, so try that.\n  if(href == null) {\n    const closestAnchor = event.target.closest('a');\n    if(closestAnchor.hasChildNodes(event.target)) {\n      href = closestAnchor.href;\n    } else {\n      // event.target is not a child of an anhcor, so there's nothing to do.\n      return;\n    }\n  }\n\n  if(window.open(href) == null) {\n    // link was not opened in new window, so display error msg to user\n    const html = document.getElementById('js-alert-danger-template').innerHTML;\n    const msg = \"This link is configured to open in a new window, but it doesn't seem to have opened. \" +\n          \"Please disable your popup blocker for this page and try again.\";\n\n    // replace message in alert and add to main div of layout\n    const mainDiv = document.querySelectorAll('div[role=\"main\"]')[0];\n    const alertDiv = document.createElement('div');\n    alertDiv.innerHTML = html.split(\"ALERT_MSG\").join(msg);\n    mainDiv.prepend(alertDiv);\n  }\n}\n\n// Helper method to set an element's innerHTML property\n// and evaluate any <script> tags that may exist within it.\n// Just setting innerHTML of an html element does not re-evaluate\n// the <script> tags that it may hold.\nexport function setInnerHTML(element, html) {\n  element.innerHTML = html;\n  const scripts = Array.from(element.querySelectorAll(\"script\"));\n\n  scripts.forEach(currentElement => {\n    const newElement = document.createElement(\"script\");\n\n    Array.from(currentElement.attributes).forEach( attr => {\n      newElement.setAttribute(attr.name, attr.value);\n    });\n\n    const scriptText = document.createTextNode(currentElement.innerHTML);\n    newElement.appendChild(scriptText);\n\n    currentElement.parentNode.replaceChild(newElement, currentElement);\n  });\n}\n\n// Helper method to report errors from the front end via AJAX\nexport function reportErrorForAnalytics(path, error) {\n  // error - report back for analytics purposes\n  const analyticsUrl = new URL(analyticsPath(path), document.location);\n  analyticsUrl.searchParams.append('error', error);\n  // Fire and Forget\n  fetch(analyticsUrl);\n}\n\n// helper method to hide an element. Note that jQuery's hide()\n// changes the inline style which may not do anything if the element\n// already has a bootstrap display class like d-flex.\nexport function hide(id) {\n  const ele = document.getElementById(id);\n  if(ele !== null) {\n    ele.classList.add('d-none');\n  }\n}\n\n// helper method to show an element. Note that jQuery's show()\n// changes the inline style which may not do anything if the element\n// already has a bootstrap display class like d-flex.\nexport function show(id) {\n  const ele = document.getElementById(id);\n  if(ele !== null) {\n    ele.classList.remove('d-none');\n  }\n}\n"],
  "mappings": "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",
  "names": ["CONFIG_ID", "configData", "analyticsPath", "type", "configData", "cssBadgeForState", "state", "capitalizeFirstLetter", "string", "startOfYear", "now", "past", "thirtyDaysAgo", "today", "showSpinner", "bindFullPageSpinnerEvent", "index", "element", "$element", "openLinkInJs", "event", "href", "closestAnchor", "html", "msg", "mainDiv", "alertDiv", "setInnerHTML", "currentElement", "newElement", "attr", "scriptText", "reportErrorForAnalytics", "path", "error", "analyticsUrl", "analyticsPath", "hide", "id", "ele", "show"]
}
